<!DOCTYPE html>
<html>

<head>
    <title>Ahmad Saeed</title>
    <link rel="stylesheet" href="styles.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <header>
        <h1>Ahmad Saeed</h1>
        <nav>
            <ul>
                <li><a href="#about">About Me</a></li>
                <li><a href="#galleryMain">Gallery</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="about">
            <h2>About Me</h2>
            <p>
                Hello, My name is Ahmad Saeed, and I am 4'1 and a goblin at 14 years old. My kindergarten sister is taller than me and my eczema is getting out of control, and I don't have the willpower to use lotion.
                I have an infinite game pass and have had it ever since I was born. My number 1 opp is Brahmjot Singh Dhaliwal. Just because he's quadruple my size doesn't mean I can't beat him up any day of the week.
                <br>
                I have garbage hygiene and teachers call me a 6th grader by accident, and all my best friends are in grade 5 and 6. I play basketball with them a lot and Fortnite.
                <br><br>
                <b>Here are some quotes from me:</b>
                "conditioner is for your body and shampoo is for your hair"<br>
                "conditioner and body wash are the same thing"<br>
                "am i your friend?"<br>
                "your actually so fake man"

                <br><br>
                <b>True stories:</b>
                One time I stuck the middle finger and called my mom a bitch because she took my xbox fortnite away and hid in the bathroom.<br>
                I also sometimes roleplay with platinum rivine, and one time he started spanking me in One<br>
                All my friends are either in grade 6, 7 or 8 but they are all taller than me
                <br><br>

                I also cheat on every grade 9 test/assignment. I have said wallah to this and i have other evidence too. All i have to do is just go to my older sisters old grade 9 work, and memorize everything. I have also cheated in grade 7-9.
            </p>
            <img src="cheating.png" width="500">
            <img src="close-up-cheating.png">
            <p>
                <br><br>
                <b>Other names for me are:</b> Om, Ohmed, Short stuff, gamepass, mini pekka, dwarf, eczema dwarf, crocodile, reptile, 3-foot crook, kindergartener, 4'1, moisture destroyer, noodle hair, strawberry croissant,
                small boy big temper, evaporated water, tahini's weenie, diddy, diddy disciple, diddy descendant, yapper, yapatron, brown diddy, teletubby, Kermit the frog, dried water, yappasaurus, god of estrogen, estrogen final boss.
            </p>
        </section>

        <section id="galleryMain">
            <h2>My collection!</h2>
            <ul id="gallery"></ul>
            <button id="loadMore">Load More</button>
        </section>

        <div id="imageModal" class="modal">
            <span class="close">&times;</span>
            <img class="modal-content" id="modalImage">
            <div class="control-buttons">
                <button id="prevSlide" class="slide-control">&lt;</button>
                <button id="toggleAutoplay" class="autoplay-button">Play</button>
                <button id="nextSlide" class="slide-control">&gt;</button>
            </div>
        </div>
    </main>

    <footer>
        <p>Ahmad Saeed 2010</p>
    </footer>

    <script>
        const gallery = document.getElementById("gallery");
        const loadMoreButton = document.getElementById("loadMore");
        const modal = document.getElementById("imageModal");
        const modalImage = document.getElementById("modalImage");
        const closeBtn = document.querySelector(".close");
        const prevSlide = document.getElementById("prevSlide");
        const nextSlide = document.getElementById("nextSlide");
        const toggleAutoplay = document.getElementById("toggleAutoplay");

        const totalImages = 158;
        const batchSize = 50;
        const autoPlayTime = 700;

        let galleryImages = [];
        let currentIndex = 0;
        let autoplayInterval = null;
        let loadedCount = 0;

        const totalImagesText = document.createElement("h3", "totalImagesText");
        totalImagesText.textContent = `Total Pictures: ${totalImages}`;
        document.getElementById("galleryMain").appendChild(totalImagesText);

        async function fetchImageCount() {
    try {
        const response = await fetch("image-count.txt");
        if (!response.ok) throw new Error("Failed to load image-count.txt");
        const text = await response.text(); // Read the response as plain text
        return parseInt(text.trim(), 10); // Parse and return the number
    } catch (error) {
        console.error("Error fetching image count:", error);
        return 100; // Return 100 as a fallback
    }
}

        console.log(fetchImageCount())
        
        function loadImages() {
            const endIndex = Math.min(loadedCount + batchSize, totalImages);

            for (let i = loadedCount + 1; i <= endIndex; i++) {
                const li = document.createElement('li');
                const img = document.createElement('img');
                img.src = `images/${i}.JPG`;
                img.alt = `Image ${i}`;
                li.appendChild(img);
                gallery.appendChild(li);
            }

            loadedCount = endIndex;

            document.querySelectorAll("#gallery img").forEach((img) => {
                if (!galleryImages.includes(img.src)) {
                    galleryImages.push(img.src);
                    img.addEventListener("click", () => {
                        currentIndex = galleryImages.indexOf(img.src);
                        openModal();
                    });
                }
            });

            if (loadedCount >= totalImages) {
                loadMoreButton.style.display = 'none';
            }
        }

        function openModal() {
            modal.style.display = "flex";
            modalImage.src = galleryImages[currentIndex];
        }

        function closeModal() {
            modal.style.display = "none";
            stopAutoplay();
        }

        function showNextSlide() {
            currentIndex = (currentIndex + 1) % galleryImages.length;
            modalImage.src = galleryImages[currentIndex];
        }

        function showPrevSlide() {
            currentIndex = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
            modalImage.src = galleryImages[currentIndex];
        }

        function startAutoplay() {
            if (!autoplayInterval) {
                autoplayInterval = setInterval(showNextSlide, autoPlayTime);
                toggleAutoplay.textContent = "Pause";
            }
        }

        function stopAutoplay() {
            clearInterval(autoplayInterval);
            autoplayInterval = null;
            toggleAutoplay.textContent = "Play";
        }

        function toggleSlideshow() {
            if (autoplayInterval) {
                stopAutoplay();
            } else {
                startAutoplay();
            }
        }

        closeBtn.addEventListener("click", closeModal);
        prevSlide.addEventListener("click", showPrevSlide);
        nextSlide.addEventListener("click", showNextSlide);
        toggleAutoplay.addEventListener("click", toggleSlideshow);
        // modal.addEventListener("keydown", (e) => {
        //     console.log(e);
        //     if (e.keyCode === 32) {
        //         console.log("space pressed")
        //         toggleSlideshow();
        // }
        // });

        // modal.addEventListener("click", (e) => {
        //     if (e.target === modal) closeModal();
        // });

        loadMoreButton.addEventListener('click', loadImages);
        loadImages();
    </script>
</body>

</html>
